@Library('shared-libot') _

node {
    def terraformHome = tool name: 'terraform', type: 'Terraform'

    def url = params.URL ?: 'https://github.com/mygurkulam-p9/Terrform_Module.git'
    def branch = params.BRANCH ?: 'AutoScaling'

    properties([
        parameters([
            string(name: 'URL', defaultValue: 'https://github.com/mygurkulam-p9/Terrform_Module.git', description: 'Repository URL for checkout'),
            string(name: 'BRANCH', defaultValue: 'AutoScaling', description: 'Branch to checkout')
        ])
    ])

    stage('Git Checkout') {
        generic.checkout(url, 'github-token1', branch)
    }

    stage('Terraform Init') {
        sh "${terraformHome}/terraform init Autoscaling"
    }

    stage('Terraform Format') {
        sh "${terraformHome}/terraform fmt Autoscaling"
    }
}

