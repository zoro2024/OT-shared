@Library('shared-libot') _

tools {
    // Specify the tool versions you want to use
    terraform 'terraform'
}

properties([
    parameters([
        string(name: 'URL', defaultValue: 'https://github.com/mygurkulam-p9/Terrform_Module.git', description: 'Repository URL for checkout'),
        string(name: 'BRANCH', defaultValue: 'AutoScaling', description: 'Branch to checkout')
    ])
])

node {
    def url = params.URL ?: 'https://github.com/mygurkulam-p9/Terrform_Module.git'
    def branch = params.BRANCH ?: 'AutoScaling'

    stage('Git Checkout') {
        generic.checkout(url, 'github-token1', branch)
    }
    stage('Terraform Init') {
        terraform.terraformInit('Autoscaling')
    }
    stage('Terraform Format') {
        terraform.terraformFormat('Autoscaling')
    }
}

